<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Il Moro - Appartamento nel centro Storico di Tuscania</title>
    <!-- Collegamento ai font di Google -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;300;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css"> <!-- Collegamento al CSS -->
    <link rel="icon" href="img/favicon.png" type="image/png"> <!-- Favicon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>

  <!-- Inizio del Header -->
<header class="header">
    <div class="logo-title">
        <a href="index.html" class="home-link"> <!-- Link che avvolge sia il logo che il titolo -->
            <img src="img/logo_il_moro.png" alt="Logo Il Moro" class="logo-image">
            <h1 class="site-title">Il Moro - Appartamento nel centro Storico di Tuscania</h1>
        </a>
    </div>

    <!-- Checkbox nascosto per controllare lo stato del menù burger -->
    <input type="checkbox" id="menu-toggle" class="menu-toggle">
    
    <!-- Burger Menu -->
    <label for="menu-toggle" class="burger-menu">
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
    </label>

    <!-- Menu a tendina per la navigazione -->
    <nav id="nav-menu" class="nav-menu">
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="galleria.html">Galleria</a></li>
            <li><a href="mappa.html">Tuscania</a></li>
            <li><a href="recensioni.html">Recensioni</a></li>
            <li><a href="contatti.html">Contatti</a></li>
        </ul>
    </nav>
</header>
<!-- Fine del Header -->

    <!-- Contenuto della pagina Mappa -->
    <div class="map-container" style="text-align: center; margin-top: 30px;"> <!-- Centra la mappa -->
        <h2>Mappa</h2>
        <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2945.4580079991756!2d11.873002575695763!3d42.41798503144056!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x1328dabce518cd2f%3A0xdbebbedc99733f23!2sVia%20del%20Moro%2C%2020%2C%2001017%20Tuscania%20VT!5e0!3m2!1sit!2sit!4v1728598282838!5m2!1sit!2sit" 
            width="600" 
            height="450" 
            style="border:0; border-radius: 10px;" 
            allowfullscreen="" 
            loading="lazy" 
            referrerpolicy="no-referrer-when-downgrade">
        </iframe>
    </div>













    
       <!-- Footer -->
<footer class="footer">
    <div class="footer-content">
        <div class="social-icons">
            <a href="https://instagram.com/appartamento_ilmoro" target="_blank" class="social-link">
                <img src="img/instagram-icon.png" alt="Instagram" class="instagram-icon">
            </a>
        </div>
        <div class="footer-language">
            <label for="language-select">Lingua:</label>
            <select id="language-select" onchange="changeLanguage(this.value)">
                <option value="it">Italiano</option>
                <option value="en">English</option>
            </select>
        </div>
        <div class="footer-bottom">
            <p>&copy;2024 Il Moro Tuscania. All rights reserved.</p>
        </div>
    </div>
</footer>

<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sconto Promozionale</title>
    <style>
        /* Stile card promozionale */
        .promo-card {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            padding: 20px;
            background-color: #1e1e3f; /* Colore di sfondo principale del tuo sito */
            color: white;
            box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            display: none;
            z-index: 1000;
        }

        /* Input e bottone */
        .promo-card input, .promo-card button {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: none;
            font-size: 14px;
        }

        .promo-card input {
            background-color: #292a4b; /* Sfondo input */
            color: white;
        }

        .promo-card button {
            background-color: #ff0048; /* Colore pulsante */
            color: white;
            cursor: pointer;
        }

        /* Pulsante di chiusura */
        .promo-card .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: transparent;
            border: none;
            font-size: 20px;
            color: white;
            cursor: pointer;
        }
    </style>
</head>
<body>

   <!-- Includi il client di EmailJS -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@2.3.2/dist/email.min.js"></script>
<script type="text/javascript">
    (function(){
        emailjs.init("c4K6orYiIW64lqj7-");  // Usa la tua API Key EmailJS
    })();
</script>

<!-- Card di sconto promozionale -->
<div class="promo-card" id="promoCard" style="display: none;">
    <button class="close-btn" id="closeBtn">×</button>
    <p>Inserisci la tua mail per avere il 10% di sconto</p>
    <input type="text" id="userName" placeholder="Come ti chiami">  <!-- Aggiunto ID -->
    <input type="email" id="userEmail" placeholder="La tua mail">  <!-- Aggiunto ID -->
    <button id="sendBtn">Grazie</button>  <!-- Aggiunto ID -->
    <p id="closePromo" style="text-align: center; margin-top: 5px; cursor: pointer;">Non mi interessa</p>
</div>

<script>
    let hasReachedBottom = false;
    const promoCard = document.getElementById('promoCard');
    const closeBtn = document.getElementById('closeBtn');
    const sendBtn = document.getElementById('sendBtn');
    const closePromo = document.getElementById('closePromo');
    const userName = document.getElementById('userName');
    const userEmail = document.getElementById('userEmail');

    // Mostra la card solo se l'utente non l'ha chiusa e dopo che ha raggiunto il fondo e risale
    window.addEventListener('scroll', function() {
        if (localStorage.getItem('promoClosed')) {
            return;  // Se la card è chiusa, non fare nulla
        }

        if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
            hasReachedBottom = true;
        }

        if (hasReachedBottom && window.scrollY < document.body.offsetHeight - 100) {
            promoCard.style.display = 'block';
        }
    });

    // Chiudi la card e salva l'informazione nel localStorage
    closeBtn.addEventListener('click', function() {
        promoCard.style.display = 'none';
        localStorage.setItem('promoClosed', 'true');
    });

    // Chiudi la card quando l'utente clicca su "Non mi interessa"
    closePromo.addEventListener('click', function() {
        promoCard.style.display = 'none';
        localStorage.setItem('promoClosed', 'true');
    });

    // Invia le email tramite EmailJS
    sendBtn.addEventListener('click', function() {
        // Verifica che i campi siano compilati
        if (userName.value && userEmail.value) {
            // Email da inviare a te
            emailjs.send("service_vg22scj", "template_vwb337n", {  // Corretto il parametro del service ID
                user_name: userName.value,
                user_email: userEmail.value,
                message: `L'utente ${userName.value} è interessato a prenotare e vuole 10% di sconto. Questa è la sua mail: ${userEmail.value}.`
            }).then(function(response) {
                console.log('Email inviata a te!', response.status, response.text);
            }, function(error) {
                console.log('Errore nell\'invio dell\'email a te...', error);
            });

            // Email automatica di risposta all'utente
            emailjs.send("service_vg22scj", "IL_TUO_TEMPLATE_ID_UTENTE", {
                user_name: userName.value,
                user_email: userEmail.value,
                message: `Ciao ${userName.value}, a breve ti contatterò per il 10% di sconto!`
            }).then(function(response) {
                console.log('Email inviata all\'utente!', response.status, response.text);
            }, function(error) {
                console.log('Errore nell\'invio dell\'email all\'utente...', error);
            });

            // Chiudi la card
            promoCard.style.display = 'none';
            localStorage.setItem('promoClosed', 'true');
        } else {
            alert('Per favore, compila tutti i campi.');
        }
    });
</script>


</body>
</html>



    <!-- Script JavaScript -->
<script src="script.js"></script>

</body>
</html>
